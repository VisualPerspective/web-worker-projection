<!DOCTYPE html>
<meta charset="utf-8">

<head>
<title>WebWorker SVG Projection Test</title>
<link rel="stylesheet" href="styles.css">
</head>

<body>
<h1>WebWorker SVG Projection Test</h1>
<div class="left">
  <form id="runBenchmark">
    <fieldset id="fields">
      <fieldset>
        <label>
          <input type="radio" name="detail" value="low">
          Low detail
        </label>
        <label>
          <input type="radio" name="detail" value="medium" checked>
          Medium detail
        </label>
        <label>
          <input type="radio" name="detail" value="high">
          High detail
        </label>
      </fieldset>
      <fieldset>
        <label>
          <input type="checkbox" name="useWorker"> Apply Projection in WebWorker
        </label>
        <p><button id="go">Run</button></p>
      </fieldset>
    </fieldset>
  </form>

  <h2>Results</h2>
  <table>
    <thead>
      <tr>
        <th>Detail</th>
        <th>Worker</th>
        <th class="number">FPS</th>
        <th class="number">Main Thread Utilization *</th>
      </tr>
    </thead>
    <tbody id="results">
    </tbody>
    <tfoot>
      <td colspan="4">
        * The percentage of time spent running JS in the main thread. Does not include layout and painting time, which change with detail but not worker usage.
      </td>
    </tfoot>
  </table>
</div>
<div class="right">
</div>

<script src='node_modules/d3-selection/build/d3-selection.js'></script>
<script src='node_modules/d3-dispatch/build/d3-dispatch.js'></script>
<script src='node_modules/d3-array/build/d3-array.js'></script>
<script src='node_modules/d3-collection/build/d3-collection.js'></script>
<script src='node_modules/d3-request/build/d3-request.js'></script>
<script src='node_modules/d3-geo/build/d3-geo.js'></script>
<script src='node_modules/d3-geo-projection/build/d3-geo-projection.js'></script>
<script src='node_modules/topojson/build/topojson.js'></script>
<script src='js/main.js'></script>
<script src='js/satellite.js'></script>
<script>
var form = document.getElementById('runBenchmark')
form.addEventListener('submit', function (e) {
  benchmark(
    this.elements['useWorker'].checked,
    this.elements['detail'].value
  )

  e.preventDefault()
})

document.getElementById('go').click()
</script>
